{"ast":null,"code":"import styles from'./BtnFavorites.module.scss';import iconLikeTrue from'../../../assets/icons/icon_like_true.png';import iconLike from'../../../assets/icons/icon_like.png';import{useDispatch,useSelector}from'react-redux';import{addFavorite,deleteFavorite}from'../../../store/favoriteSlice';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";const BtnFavorites=_ref=>{let{product}=_ref;const dispatch=useDispatch();const user=useSelector(state=>state.auth.user);const token=useSelector(state=>state.auth.token);const favorites=useSelector(state=>state.favorites.favorites);const isFavorite=favorites.some(f=>f.id===product.id);const addFavouriteHandler=async()=>{if(user!==null&&user!==void 0&&user.id){await axios.post(\"http://localhost:5050/api/favorites\",{user_id:user.id,product_id:product.id},{headers:{Authorization:\"Bearer \".concat(token)}});}dispatch(addFavorite(product));};const deleteFavouriteHandler=async()=>{if(user!==null&&user!==void 0&&user.id){await axios.delete(\"http://localhost:5050/api/favorites\",{data:{user_id:user.id,product_id:product.id},headers:{Authorization:\"Bearer \".concat(token)}});}dispatch(deleteFavorite(product));};return/*#__PURE__*/_jsx(\"div\",{className:styles.btnFavorites,children:isFavorite?/*#__PURE__*/_jsx(\"button\",{className:styles.btnFavorites,onClick:deleteFavouriteHandler,children:/*#__PURE__*/_jsx(\"img\",{style:{width:'30px'},src:iconLikeTrue,alt:\"like\"})}):/*#__PURE__*/_jsx(\"button\",{className:styles.btnFavorites,onClick:addFavouriteHandler,children:/*#__PURE__*/_jsx(\"img\",{style:{width:'30px'},src:iconLike,alt:\"like\"})})});};export default BtnFavorites;","map":{"version":3,"names":["styles","iconLikeTrue","iconLike","useDispatch","useSelector","addFavorite","deleteFavorite","axios","jsx","_jsx","BtnFavorites","_ref","product","dispatch","user","state","auth","token","favorites","isFavorite","some","f","id","addFavouriteHandler","post","user_id","product_id","headers","Authorization","concat","deleteFavouriteHandler","delete","data","className","btnFavorites","children","onClick","style","width","src","alt"],"sources":["/Users/test/Desktop/Flowers/my-app/client/src/pages/favoritesPage/btnFavorites/BtnFavorites.jsx"],"sourcesContent":["import styles from './BtnFavorites.module.scss';\nimport iconLikeTrue from '../../../assets/icons/icon_like_true.png';\nimport iconLike from '../../../assets/icons/icon_like.png';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { addFavorite, deleteFavorite } from '../../../store/favoriteSlice';\nimport axios from 'axios';\n\nconst BtnFavorites = ({ product }) => {\n  const dispatch = useDispatch();\n\n  const user = useSelector((state) => state.auth.user);\n  const token = useSelector((state) => state.auth.token);\n  const favorites = useSelector((state) => state.favorites.favorites);\n  const isFavorite = favorites.some((f) => f.id === product.id);\n\n  const addFavouriteHandler = async () => {\n    if (user?.id) {\n      await axios.post(\n        `http://localhost:5050/api/favorites`,\n        {\n          user_id: user.id,\n          product_id: product.id,\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n    }\n    dispatch(addFavorite(product));\n  };\n\n  const deleteFavouriteHandler = async () => {\n    if (user?.id) {\n      await axios.delete(`http://localhost:5050/api/favorites`, {\n        data: {\n          user_id: user.id,\n          product_id: product.id,\n        },\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n    }\n    dispatch(deleteFavorite(product));\n  };\n\n  return (\n    <div className={styles.btnFavorites}>\n      {isFavorite ? (\n        <button\n          className={styles.btnFavorites}\n          onClick={deleteFavouriteHandler}\n        >\n          <img style={{ width: '30px' }} src={iconLikeTrue} alt=\"like\" />\n        </button>\n      ) : (\n        <button className={styles.btnFavorites} onClick={addFavouriteHandler}>\n          <img style={{ width: '30px' }} src={iconLike} alt=\"like\" />\n        </button>\n      )}\n    </div>\n  );\n};\nexport default BtnFavorites;\n"],"mappings":"AAAA,MAAO,CAAAA,MAAM,KAAM,4BAA4B,CAC/C,MAAO,CAAAC,YAAY,KAAM,0CAA0C,CACnE,MAAO,CAAAC,QAAQ,KAAM,qCAAqC,CAC1D,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,WAAW,CAAEC,cAAc,KAAQ,8BAA8B,CAC1E,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE1B,KAAM,CAAAC,YAAY,CAAGC,IAAA,EAAiB,IAAhB,CAAEC,OAAQ,CAAC,CAAAD,IAAA,CAC/B,KAAM,CAAAE,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAW,IAAI,CAAGV,WAAW,CAAEW,KAAK,EAAKA,KAAK,CAACC,IAAI,CAACF,IAAI,CAAC,CACpD,KAAM,CAAAG,KAAK,CAAGb,WAAW,CAAEW,KAAK,EAAKA,KAAK,CAACC,IAAI,CAACC,KAAK,CAAC,CACtD,KAAM,CAAAC,SAAS,CAAGd,WAAW,CAAEW,KAAK,EAAKA,KAAK,CAACG,SAAS,CAACA,SAAS,CAAC,CACnE,KAAM,CAAAC,UAAU,CAAGD,SAAS,CAACE,IAAI,CAAEC,CAAC,EAAKA,CAAC,CAACC,EAAE,GAAKV,OAAO,CAACU,EAAE,CAAC,CAE7D,KAAM,CAAAC,mBAAmB,CAAG,KAAAA,CAAA,GAAY,CACtC,GAAIT,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEQ,EAAE,CAAE,CACZ,KAAM,CAAAf,KAAK,CAACiB,IAAI,uCAEd,CACEC,OAAO,CAAEX,IAAI,CAACQ,EAAE,CAChBI,UAAU,CAAEd,OAAO,CAACU,EACtB,CAAC,CACD,CACEK,OAAO,CAAE,CACPC,aAAa,WAAAC,MAAA,CAAYZ,KAAK,CAChC,CACF,CACF,CAAC,CACH,CACAJ,QAAQ,CAACR,WAAW,CAACO,OAAO,CAAC,CAAC,CAChC,CAAC,CAED,KAAM,CAAAkB,sBAAsB,CAAG,KAAAA,CAAA,GAAY,CACzC,GAAIhB,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEQ,EAAE,CAAE,CACZ,KAAM,CAAAf,KAAK,CAACwB,MAAM,uCAAwC,CACxDC,IAAI,CAAE,CACJP,OAAO,CAAEX,IAAI,CAACQ,EAAE,CAChBI,UAAU,CAAEd,OAAO,CAACU,EACtB,CAAC,CACDK,OAAO,CAAE,CACPC,aAAa,WAAAC,MAAA,CAAYZ,KAAK,CAChC,CACF,CAAC,CAAC,CACJ,CACAJ,QAAQ,CAACP,cAAc,CAACM,OAAO,CAAC,CAAC,CACnC,CAAC,CAED,mBACEH,IAAA,QAAKwB,SAAS,CAAEjC,MAAM,CAACkC,YAAa,CAAAC,QAAA,CACjChB,UAAU,cACTV,IAAA,WACEwB,SAAS,CAAEjC,MAAM,CAACkC,YAAa,CAC/BE,OAAO,CAAEN,sBAAuB,CAAAK,QAAA,cAEhC1B,IAAA,QAAK4B,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAO,CAAE,CAACC,GAAG,CAAEtC,YAAa,CAACuC,GAAG,CAAC,MAAM,CAAE,CAAC,CACzD,CAAC,cAET/B,IAAA,WAAQwB,SAAS,CAAEjC,MAAM,CAACkC,YAAa,CAACE,OAAO,CAAEb,mBAAoB,CAAAY,QAAA,cACnE1B,IAAA,QAAK4B,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAO,CAAE,CAACC,GAAG,CAAErC,QAAS,CAACsC,GAAG,CAAC,MAAM,CAAE,CAAC,CACrD,CACT,CACE,CAAC,CAEV,CAAC,CACD,cAAe,CAAA9B,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}