{"ast":null,"code":"import{useDispatch,useSelector}from'react-redux';import{useEffect,useMemo}from'react';import{fetchAllProducts,fetchProductsByCategory}from'../../../store/productsSlice';import styles from'./ProductsList.module.scss';import ProductsCard from'../ProductsCard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductsList=_ref=>{let{start=0,limit,categoryId}=_ref;const dispatch=useDispatch();const allState=useSelector(state=>state.products.all);const filteredStateByCategory=useSelector(state=>state.products.filtered.itemsByCategory||{});const filteredStatusByCategory=useSelector(state=>state.products.filtered.statusByCategory||{});const filteredErrorByCategory=useSelector(state=>state.products.filtered.errorByCategory||{});const filteredState=filteredStateByCategory[categoryId]||[];const filteredStatus=filteredStatusByCategory[categoryId]||'idle';const filteredError=filteredErrorByCategory[categoryId]||null;const products=categoryId?filteredState:allState.items||[];const status=categoryId?filteredStatus:allState.status||'idle';const error=categoryId?filteredError:allState.error||null;useEffect(()=>{if(categoryId){dispatch(fetchProductsByCategory(categoryId));}else{dispatch(fetchAllProducts());}},[dispatch,categoryId]);const displayedProducts=useMemo(()=>{if(!(products!==null&&products!==void 0&&products.length))return[];return limit?products.slice(start,start+limit):products;},[products,start,limit]);if(status==='loading')return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});if(status==='error')return/*#__PURE__*/_jsx(\"p\",{children:\"Error...\"});if(status==='failed')return/*#__PURE__*/_jsxs(\"p\",{children:[\"Error:\",error]});return/*#__PURE__*/_jsx(\"section\",{className:styles.grid,children:displayedProducts.map(product=>/*#__PURE__*/_jsx(ProductsCard,{product:product},product.id))});};export default ProductsList;","map":{"version":3,"names":["useDispatch","useSelector","useEffect","useMemo","fetchAllProducts","fetchProductsByCategory","styles","ProductsCard","jsx","_jsx","jsxs","_jsxs","ProductsList","_ref","start","limit","categoryId","dispatch","allState","state","products","all","filteredStateByCategory","filtered","itemsByCategory","filteredStatusByCategory","statusByCategory","filteredErrorByCategory","errorByCategory","filteredState","filteredStatus","filteredError","items","status","error","displayedProducts","length","slice","children","className","grid","map","product","id"],"sources":["/Users/test/Desktop/Flowers/my-app/client/src/components/products/productsList/ProductsList.jsx"],"sourcesContent":["import { useDispatch, useSelector } from 'react-redux';\nimport { useEffect, useMemo } from 'react';\nimport {\n  fetchAllProducts,\n  fetchProductsByCategory,\n} from '../../../store/productsSlice';\nimport styles from './ProductsList.module.scss';\nimport ProductsCard from '../ProductsCard';\n\nconst ProductsList = ({ start = 0, limit, categoryId }) => {\n  const dispatch = useDispatch();\n\n  const allState = useSelector((state) => state.products.all);\n  const filteredStateByCategory = useSelector(\n    (state) => state.products.filtered.itemsByCategory || {}\n  );\n  const filteredStatusByCategory = useSelector(\n    (state) => state.products.filtered.statusByCategory || {}\n  );\n  const filteredErrorByCategory = useSelector(\n    (state) => state.products.filtered.errorByCategory || {}\n  );\n\n  const filteredState = filteredStateByCategory[categoryId] || [];\n  const filteredStatus = filteredStatusByCategory[categoryId] || 'idle';\n  const filteredError = filteredErrorByCategory[categoryId] || null;\n\n  const products = categoryId ? filteredState : allState.items || [];\n  const status = categoryId ? filteredStatus : allState.status || 'idle';\n  const error = categoryId ? filteredError : allState.error || null;\n\n  useEffect(() => {\n    if (categoryId) {\n      dispatch(fetchProductsByCategory(categoryId));\n    } else {\n      dispatch(fetchAllProducts());\n    }\n  }, [dispatch, categoryId]);\n\n  const displayedProducts = useMemo(() => {\n    if (!products?.length) return [];\n    return limit ? products.slice(start, start + limit) : products;\n  }, [products, start, limit]);\n\n  if (status === 'loading') return <p>Loading...</p>;\n  if (status === 'error') return <p>Error...</p>;\n  if (status === 'failed') return <p>Error:{error}</p>;\n\n  return (\n    <section className={styles.grid}>\n      {displayedProducts.map((product) => (\n        <ProductsCard key={product.id} product={product} />\n      ))}\n    </section>\n  );\n};\nexport default ProductsList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}