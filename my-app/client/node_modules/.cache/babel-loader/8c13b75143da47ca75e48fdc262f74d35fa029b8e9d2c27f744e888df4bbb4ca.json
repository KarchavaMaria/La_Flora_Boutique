{"ast":null,"code":"import _objectSpread from\"/Users/test/Desktop/Flowers/my-app/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import styles from'./LoginPage.module.scss';import*as yup from'yup';import{useForm}from'react-hook-form';import{yupResolver}from'@hookform/resolvers/yup';import PageHeader from'../pageHeader/PageHeader';import{usePostLoginMutation}from'../../store/authApi';import{useNavigate}from'react-router-dom';import{useDispatch}from'react-redux';import{setUser,setToken}from'../../store/authSlice';import{useEffect,useState}from'react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const schema=yup.object().shape({email:yup.string().email().min(10,'Min 10 characters').required('Email is required'),password:yup.string().required('Password is required').min(8,'Min 8 characters')});const LoginPage=()=>{var _errors$email,_errors$password;const dispatch=useDispatch();const navigate=useNavigate();const[loginUser]=usePostLoginMutation();const[rememberMe,setRememberMe]=useState(false);const[isHidden,setIsHidden]=useState(true);const{register,formState:{errors},setValue,reset,handleSubmit}=useForm({resolver:yupResolver(schema)});useEffect(()=>{const rememberEmail=localStorage.getItem('remember');if(rememberEmail){setValue('email',rememberEmail);setRememberMe(true);}},[setValue]);const onSubmit=async values=>{try{const res=await loginUser(values).unwrap();if(rememberMe)localStorage.setItem('remember',values.email);else localStorage.removeItem('remember');dispatch(setToken(res.token));dispatch(setUser(res.user));navigate('/profile');alert('Successfully login!');reset();}catch(errors){console.log(errors);alert('Failed to login');}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PageHeader,{style:{background:'#205529',color:'white'},label:\"Authorization\",subtitle:\"Authorization in a couple of seconds\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.loginPage,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.inputForm,children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({className:styles.inputText,type:\"email\"},register('email')),{},{placeholder:\"Email\"})),/*#__PURE__*/_jsx(\"p\",{className:styles.error,children:(_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.inputForm,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.inputFormPassword,children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({className:styles.inputText,type:isHidden?'password':'text'},register('password')),{},{placeholder:\"Password\"})),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsHidden(!isHidden),type:\"button\",children:isHidden?'üôà':'üëÅÔ∏è'}),/*#__PURE__*/_jsx(\"p\",{className:styles.error,children:(_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.message})]})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.remember,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:styles.rememberMe,checked:rememberMe,onChange:e=>setRememberMe(e.target.checked)}),/*#__PURE__*/_jsx(\"p\",{children:\"Remember me\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.btnBlocks,children:[/*#__PURE__*/_jsx(\"button\",{className:styles.btnLog,type:\"submit\",children:\"Login\"}),/*#__PURE__*/_jsx(\"button\",{className:styles.btnRegist,type:\"button\",onClick:()=>navigate('/register'),children:\"Register\"})]})]})})]});};export default LoginPage;","map":{"version":3,"names":["styles","yup","useForm","yupResolver","PageHeader","usePostLoginMutation","useNavigate","useDispatch","setUser","setToken","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","schema","object","shape","email","string","min","required","password","LoginPage","_errors$email","_errors$password","dispatch","navigate","loginUser","rememberMe","setRememberMe","isHidden","setIsHidden","register","formState","errors","setValue","reset","handleSubmit","resolver","rememberEmail","localStorage","getItem","onSubmit","values","res","unwrap","setItem","removeItem","token","user","alert","console","log","children","style","background","color","label","subtitle","className","loginPage","inputForm","_objectSpread","inputText","type","placeholder","error","message","inputFormPassword","onClick","remember","checked","onChange","e","target","btnBlocks","btnLog","btnRegist"],"sources":["/Users/test/Desktop/Flowers/my-app/client/src/pages/loginPage/LoginPage.jsx"],"sourcesContent":["import styles from './LoginPage.module.scss';\nimport * as yup from 'yup';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport PageHeader from '../pageHeader/PageHeader';\nimport { usePostLoginMutation } from '../../store/authApi';\nimport { useNavigate } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { setUser, setToken } from '../../store/authSlice';\nimport { useEffect, useState } from 'react';\n\nconst schema = yup.object().shape({\n  email: yup\n    .string()\n    .email()\n    .min(10, 'Min 10 characters')\n    .required('Email is required'),\n  password: yup\n    .string()\n    .required('Password is required')\n    .min(8, 'Min 8 characters'),\n});\n\nconst LoginPage = () => {\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  const [loginUser] = usePostLoginMutation();\n  const [rememberMe, setRememberMe] = useState(false);\n  const [isHidden, setIsHidden] = useState(true);\n\n  const {\n    register,\n    formState: { errors },\n    setValue,\n    reset,\n    handleSubmit,\n  } = useForm({\n    resolver: yupResolver(schema),\n  });\n\n  useEffect(() => {\n    const rememberEmail = localStorage.getItem('remember');\n    if (rememberEmail) {\n      setValue('email', rememberEmail);\n      setRememberMe(true);\n    }\n  }, [setValue]);\n\n  const onSubmit = async (values) => {\n    try {\n      const res = await loginUser(values).unwrap();\n      if (rememberMe) localStorage.setItem('remember', values.email);\n      else localStorage.removeItem('remember');\n      dispatch(setToken(res.token));\n      dispatch(setUser(res.user));\n      navigate('/profile');\n      alert('Successfully login!');\n      reset();\n    } catch (errors) {\n      console.log(errors);\n      alert('Failed to login');\n    }\n  };\n\n  return (\n    <>\n      <PageHeader\n        style={{ background: '#205529', color: 'white' }}\n        label=\"Authorization\"\n        subtitle=\"Authorization in a couple of seconds\"\n      />\n      <div className={styles.loginPage}>\n        <form onSubmit={handleSubmit(onSubmit)}>\n          <div className={styles.inputForm}>\n            <input\n              className={styles.inputText}\n              type=\"email\"\n              {...register('email')}\n              placeholder=\"Email\"\n            />\n            <p className={styles.error}>{errors.email?.message}</p>\n          </div>\n          <div className={styles.inputForm}>\n            <div className={styles.inputFormPassword}>\n              <input\n                className={styles.inputText}\n                type={isHidden ? 'password' : 'text'}\n                {...register('password')}\n                placeholder=\"Password\"\n              />\n              <button onClick={() => setIsHidden(!isHidden)} type=\"button\">\n                {isHidden ? 'üôà' : 'üëÅÔ∏è'}\n              </button>\n              <p className={styles.error}>{errors.password?.message}</p>\n            </div>\n          </div>\n          <div className={styles.remember}>\n            <input\n              type=\"checkbox\"\n              className={styles.rememberMe}\n              checked={rememberMe}\n              onChange={(e) => setRememberMe(e.target.checked)}\n            />\n            <p>Remember me</p>\n          </div>\n          <div className={styles.btnBlocks}>\n            <button className={styles.btnLog} type=\"submit\">\n              Login\n            </button>\n            <button\n              className={styles.btnRegist}\n              type=\"button\"\n              onClick={() => navigate('/register')}\n            >\n              Register\n            </button>\n          </div>\n        </form>\n      </div>\n    </>\n  );\n};\nexport default LoginPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}