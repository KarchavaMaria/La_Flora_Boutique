{"ast":null,"code":"import{createApi,fetchBaseQuery}from'@reduxjs/toolkit/query/react';export const authApi=createApi({reducerPath:'authApi',baseQuery:fetchBaseQuery({baseUrl:'http://localhost:5050/api/auth',prepareHeaders:(headers,_ref)=>{var _getState$user;let{getState}=_ref;const token=(_getState$user=getState().user)===null||_getState$user===void 0?void 0:_getState$user.token;if(token)headers.set('Authorization',\"Bearer \".concat(token));return headers;}}),endpoints:build=>({postRegister:build.mutation({query:body=>({url:'/register',method:'POST',body})}),postLogin:build.mutation({query:body=>({url:'/login',method:'POST',body})}),getMe:build.query({query:()=>'/me'})})});export const{usePostRegisterMutation,usePostLoginMutation}=authApi;","map":{"version":3,"names":["createApi","fetchBaseQuery","authApi","reducerPath","baseQuery","baseUrl","prepareHeaders","headers","_ref","_getState$user","getState","token","user","set","concat","endpoints","build","postRegister","mutation","query","body","url","method","postLogin","getMe","usePostRegisterMutation","usePostLoginMutation"],"sources":["/Users/test/Desktop/Flowers/my-app/client/src/store/authApi.js"],"sourcesContent":["import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\n\nexport const authApi = createApi({\n  reducerPath: 'authApi',\n  baseQuery: fetchBaseQuery({\n    baseUrl: 'http://localhost:5050/api/auth',\n    prepareHeaders: (headers, { getState }) => {\n      const token = getState().user?.token;\n      if (token) headers.set('Authorization', `Bearer ${token}`);\n      return headers;\n    },\n  }),\n\n  endpoints: (build) => ({\n    postRegister: build.mutation({\n      query: (body) => ({\n        url: '/register',\n        method: 'POST',\n        body,\n      }),\n    }),\n    postLogin: build.mutation({\n      query: (body) => ({\n        url: '/login',\n        method: 'POST',\n        body,\n      }),\n    }),\n    getMe: build.query({\n      query: () => '/me',\n    }),\n  }),\n});\n\nexport const { usePostRegisterMutation, usePostLoginMutation } = authApi;\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,cAAc,KAAQ,8BAA8B,CAExE,MAAO,MAAM,CAAAC,OAAO,CAAGF,SAAS,CAAC,CAC/BG,WAAW,CAAE,SAAS,CACtBC,SAAS,CAAEH,cAAc,CAAC,CACxBI,OAAO,CAAE,gCAAgC,CACzCC,cAAc,CAAEA,CAACC,OAAO,CAAAC,IAAA,GAAmB,KAAAC,cAAA,IAAjB,CAAEC,QAAS,CAAC,CAAAF,IAAA,CACpC,KAAM,CAAAG,KAAK,EAAAF,cAAA,CAAGC,QAAQ,CAAC,CAAC,CAACE,IAAI,UAAAH,cAAA,iBAAfA,cAAA,CAAiBE,KAAK,CACpC,GAAIA,KAAK,CAAEJ,OAAO,CAACM,GAAG,CAAC,eAAe,WAAAC,MAAA,CAAYH,KAAK,CAAE,CAAC,CAC1D,MAAO,CAAAJ,OAAO,CAChB,CACF,CAAC,CAAC,CAEFQ,SAAS,CAAGC,KAAK,GAAM,CACrBC,YAAY,CAAED,KAAK,CAACE,QAAQ,CAAC,CAC3BC,KAAK,CAAGC,IAAI,GAAM,CAChBC,GAAG,CAAE,WAAW,CAChBC,MAAM,CAAE,MAAM,CACdF,IACF,CAAC,CACH,CAAC,CAAC,CACFG,SAAS,CAAEP,KAAK,CAACE,QAAQ,CAAC,CACxBC,KAAK,CAAGC,IAAI,GAAM,CAChBC,GAAG,CAAE,QAAQ,CACbC,MAAM,CAAE,MAAM,CACdF,IACF,CAAC,CACH,CAAC,CAAC,CACFI,KAAK,CAAER,KAAK,CAACG,KAAK,CAAC,CACjBA,KAAK,CAAEA,CAAA,GAAM,KACf,CAAC,CACH,CAAC,CACH,CAAC,CAAC,CAEF,MAAO,MAAM,CAAEM,uBAAuB,CAAEC,oBAAqB,CAAC,CAAGxB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}