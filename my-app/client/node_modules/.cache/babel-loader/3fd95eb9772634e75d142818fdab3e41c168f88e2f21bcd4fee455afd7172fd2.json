{"ast":null,"code":"var _jsxFileName = \"/Users/test/Desktop/Flowers/my-app/client/src/pages/loginPage/LoginPage.jsx\",\n  _s = $RefreshSig$();\nimport styles from './LoginPage.module.scss';\nimport * as yup from 'yup';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport PageHeader from '../pageHeader/PageHeader';\nimport { usePostLoginMutation } from '../../store/authApi';\nimport { useNavigate } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { setUser, setToken } from '../../store/authSlice';\nimport { useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst schema = yup.object().shape({\n  email: yup.string().email().min(10, 'Min 10 characters').required('Email is required'),\n  password: yup.string().required('Password is required').min(8, 'Min 8 characters')\n});\nconst LoginPage = () => {\n  _s();\n  var _errors$email, _errors$password;\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const [loginUser] = usePostLoginMutation();\n  const [rememberMe, setRememberMe] = useState(false);\n  const [isHidden, setIsHidden] = useState(true);\n  const {\n    register,\n    formState: {\n      errors\n    },\n    setValue,\n    reset,\n    handleSubmit\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n  useEffect(() => {\n    const rememberEmail = localStorage.getItem('remember');\n    if (rememberEmail) {\n      setValue('email', rememberEmail);\n      setRememberMe(true);\n    }\n  }, [setValue]);\n  const onSubmit = async values => {\n    try {\n      const res = await loginUser(values).unwrap();\n      if (rememberMe) localStorage.setItem('remember', values.email);else localStorage.removeItem('remember');\n      dispatch(setToken(res.token));\n      dispatch(setUser(res.user));\n      navigate('/profile');\n      alert('Successfully login!');\n      reset();\n    } catch (errors) {\n      console.log(errors);\n      alert('Failed to login');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(PageHeader, {\n      style: {\n        background: '#205529',\n        color: 'white'\n      },\n      label: \"Authorization\",\n      subtitle: \"Authorization in a couple of seconds\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.loginPage,\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit(onSubmit),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.inputForm,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: styles.inputText,\n            type: \"email\",\n            ...register('email'),\n            placeholder: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.error,\n            children: (_errors$email = errors.email) === null || _errors$email === void 0 ? void 0 : _errors$email.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.inputForm,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.inputFormPassword,\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: styles.inputText,\n              type: isHidden ? 'password' : 'text',\n              ...register('password'),\n              placeholder: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setIsHidden(!isHidden),\n              type: \"button\",\n              children: isHidden ? 'üôà' : 'üëÅÔ∏è'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: styles.error,\n              children: (_errors$password = errors.password) === null || _errors$password === void 0 ? void 0 : _errors$password.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.remember,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            className: styles.rememberMe,\n            checked: rememberMe,\n            onChange: e => setRememberMe(e.target.checked)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Remember me\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.btnBlocks,\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: styles.btnLog,\n            type: \"submit\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: styles.btnRegist,\n            type: \"button\",\n            onClick: () => navigate('/register'),\n            children: \"Register\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(LoginPage, \"SWshJYlVlXehQ5KJRYSXgRPLfvg=\", false, function () {\n  return [useDispatch, useNavigate, usePostLoginMutation, useForm];\n});\n_c = LoginPage;\nexport default LoginPage;\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["styles","yup","useForm","yupResolver","PageHeader","usePostLoginMutation","useNavigate","useDispatch","setUser","setToken","useEffect","useState","jsxDEV","_jsxDEV","Fragment","_Fragment","schema","object","shape","email","string","min","required","password","LoginPage","_s","_errors$email","_errors$password","dispatch","navigate","loginUser","rememberMe","setRememberMe","isHidden","setIsHidden","register","formState","errors","setValue","reset","handleSubmit","resolver","rememberEmail","localStorage","getItem","onSubmit","values","res","unwrap","setItem","removeItem","token","user","alert","console","log","children","style","background","color","label","subtitle","fileName","_jsxFileName","lineNumber","columnNumber","className","loginPage","inputForm","inputText","type","placeholder","error","message","inputFormPassword","onClick","remember","checked","onChange","e","target","btnBlocks","btnLog","btnRegist","_c","$RefreshReg$"],"sources":["/Users/test/Desktop/Flowers/my-app/client/src/pages/loginPage/LoginPage.jsx"],"sourcesContent":["import styles from './LoginPage.module.scss';\nimport * as yup from 'yup';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport PageHeader from '../pageHeader/PageHeader';\nimport { usePostLoginMutation } from '../../store/authApi';\nimport { useNavigate } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { setUser, setToken } from '../../store/authSlice';\nimport { useEffect, useState } from 'react';\n\nconst schema = yup.object().shape({\n  email: yup\n    .string()\n    .email()\n    .min(10, 'Min 10 characters')\n    .required('Email is required'),\n  password: yup\n    .string()\n    .required('Password is required')\n    .min(8, 'Min 8 characters'),\n});\n\nconst LoginPage = () => {\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  const [loginUser] = usePostLoginMutation();\n  const [rememberMe, setRememberMe] = useState(false);\n  const [isHidden, setIsHidden] = useState(true);\n\n  const {\n    register,\n    formState: { errors },\n    setValue,\n    reset,\n    handleSubmit,\n  } = useForm({\n    resolver: yupResolver(schema),\n  });\n\n  useEffect(() => {\n    const rememberEmail = localStorage.getItem('remember');\n    if (rememberEmail) {\n      setValue('email', rememberEmail);\n      setRememberMe(true);\n    }\n  }, [setValue]);\n\n  const onSubmit = async (values) => {\n    try {\n      const res = await loginUser(values).unwrap();\n      if (rememberMe) localStorage.setItem('remember', values.email);\n      else localStorage.removeItem('remember');\n      dispatch(setToken(res.token));\n      dispatch(setUser(res.user));\n      navigate('/profile');\n      alert('Successfully login!');\n      reset();\n    } catch (errors) {\n      console.log(errors);\n      alert('Failed to login');\n    }\n  };\n\n  return (\n    <>\n      <PageHeader\n        style={{ background: '#205529', color: 'white' }}\n        label=\"Authorization\"\n        subtitle=\"Authorization in a couple of seconds\"\n      />\n      <div className={styles.loginPage}>\n        <form onSubmit={handleSubmit(onSubmit)}>\n          <div className={styles.inputForm}>\n            <input\n              className={styles.inputText}\n              type=\"email\"\n              {...register('email')}\n              placeholder=\"Email\"\n            />\n            <p className={styles.error}>{errors.email?.message}</p>\n          </div>\n          <div className={styles.inputForm}>\n            <div className={styles.inputFormPassword}>\n              <input\n                className={styles.inputText}\n                type={isHidden ? 'password' : 'text'}\n                {...register('password')}\n                placeholder=\"Password\"\n              />\n              <button onClick={() => setIsHidden(!isHidden)} type=\"button\">\n                {isHidden ? 'üôà' : 'üëÅÔ∏è'}\n              </button>\n              <p className={styles.error}>{errors.password?.message}</p>\n            </div>\n          </div>\n          <div className={styles.remember}>\n            <input\n              type=\"checkbox\"\n              className={styles.rememberMe}\n              checked={rememberMe}\n              onChange={(e) => setRememberMe(e.target.checked)}\n            />\n            <p>Remember me</p>\n          </div>\n          <div className={styles.btnBlocks}>\n            <button className={styles.btnLog} type=\"submit\">\n              Login\n            </button>\n            <button\n              className={styles.btnRegist}\n              type=\"button\"\n              onClick={() => navigate('/register')}\n            >\n              Register\n            </button>\n          </div>\n        </form>\n      </div>\n    </>\n  );\n};\nexport default LoginPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}