{"ast":null,"code":"import _objectSpread from\"/Users/test/Desktop/Flowers/my-app/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import*as yup from'yup';import{useForm}from'react-hook-form';import{yupResolver}from'@hookform/resolvers/yup';import{useEffect,useState}from'react';import styles from'./RegisterPage.module.scss';import PageHeader from'../pageHeader/PageHeader';import{usePostRegisterMutation}from'../../store/authApi';import{setToken,setUser}from'../../store/authSlice';import{useDispatch}from'react-redux';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const schema=yup.object({name:yup.string().required('Name is required'),email:yup.string().email().min(10,'Min 10 characters').required('Email is required'),password:yup.string().min(8,'Min 8 characters').required('Password is required'),confirmPassword:yup.string().oneOf([yup.ref('password')],'Password does not match').required('Password is required')});const RegisterPage=()=>{var _errors$name,_errors$email,_errors$password,_errors$confirmPasswo;const navigate=useNavigate();const dispatch=useDispatch();const[isHidden,setIsHidden]=useState(false);const[rememberMe,setRememberMe]=useState(false);const[registerUser]=usePostRegisterMutation();const{register,setValue,formState:{errors},reset,handleSubmit}=useForm({resolver:yupResolver(schema)});useEffect(()=>{const rememberEmail=localStorage.getItem('remember');if(rememberEmail){setValue('email',rememberEmail);setRememberMe(true);}},[setValue]);const onSubmit=async values=>{try{const res=await registerUser(values).unwrap();if(rememberMe)localStorage.setItem('remember',values.email);else localStorage.removeItem('remember');dispatch(setToken(res.token));dispatch(setUser(res.user));navigate('/profile');alert('Successfully registered!');reset();}catch(e){var _e$response;console.log('ERROR:',((_e$response=e.response)===null||_e$response===void 0?void 0:_e$response.data)||e.message);alert('Failed to register');}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PageHeader,{style:{background:'#205529',color:'white'},label:\"Register\",subtitle:\"Registration in a couple of seconds \"}),/*#__PURE__*/_jsx(\"div\",{className:styles.registration,children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit(onSubmit),children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.inputForm,children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({className:styles.inputText,type:\"text\",placeholder:\"Your full name\",autoComplete:\"name\"},register('name'))),/*#__PURE__*/_jsx(\"p\",{className:styles.error,children:(_errors$name=errors.name)===null||_errors$name===void 0?void 0:_errors$name.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.inputForm,children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({className:styles.inputText,type:\"email\",placeholder:\"Your email address\",autoComplete:\"email\"},register('email'))),/*#__PURE__*/_jsx(\"p\",{className:styles.error,children:(_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.inputForm,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.inputFormPassword,children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({className:styles.inputText,type:isHidden?'password':'text',autoComplete:\"new-password\",placeholder:\"Your password\"},register('password'))),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsHidden(!isHidden),type:\"button\",children:isHidden?'üôà':'üëÅÔ∏è'})]}),/*#__PURE__*/_jsx(\"p\",{className:styles.error,children:(_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.inputForm,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.inputFormPassword,children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({className:styles.inputText,type:isHidden?'password':'text',placeholder:\"Your password\",autoComplete:\"new-password\"},register('confirmPassword'))),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsHidden(!isHidden),type:\"button\",children:isHidden?'üôà':'üëÅÔ∏è'})]}),/*#__PURE__*/_jsx(\"p\",{className:styles.error,children:(_errors$confirmPasswo=errors.confirmPassword)===null||_errors$confirmPasswo===void 0?void 0:_errors$confirmPasswo.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.remember,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:styles.rememberMe,checked:rememberMe,onChange:e=>setRememberMe(e.target.checked)}),/*#__PURE__*/_jsx(\"p\",{children:\"Remember me\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:styles.submit,type:\"submit\",children:\"Register\"})})]})})})]});};export default RegisterPage;","map":{"version":3,"names":["yup","useForm","yupResolver","useEffect","useState","styles","PageHeader","usePostRegisterMutation","setToken","setUser","useDispatch","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","schema","object","name","string","required","email","min","password","confirmPassword","oneOf","ref","RegisterPage","_errors$name","_errors$email","_errors$password","_errors$confirmPasswo","navigate","dispatch","isHidden","setIsHidden","rememberMe","setRememberMe","registerUser","register","setValue","formState","errors","reset","handleSubmit","resolver","rememberEmail","localStorage","getItem","onSubmit","values","res","unwrap","setItem","removeItem","token","user","alert","e","_e$response","console","log","response","data","message","children","style","background","color","label","subtitle","className","registration","inputForm","_objectSpread","inputText","type","placeholder","autoComplete","error","inputFormPassword","onClick","remember","checked","onChange","target","submit"],"sources":["/Users/test/Desktop/Flowers/my-app/client/src/pages/registerPage/RegisterPage.jsx"],"sourcesContent":["import * as yup from 'yup';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { useEffect, useState } from 'react';\nimport styles from './RegisterPage.module.scss';\nimport PageHeader from '../pageHeader/PageHeader';\nimport { usePostRegisterMutation } from '../../store/authApi';\nimport { setToken, setUser } from '../../store/authSlice';\nimport { useDispatch } from 'react-redux';\nimport { useNavigate } from 'react-router-dom';\n\nconst schema = yup.object({\n  name: yup.string().required('Name is required'),\n  email: yup\n    .string()\n    .email()\n    .min(10, 'Min 10 characters')\n    .required('Email is required'),\n  password: yup\n    .string()\n    .min(8, 'Min 8 characters')\n    .required('Password is required'),\n  confirmPassword: yup\n    .string()\n    .oneOf([yup.ref('password')], 'Password does not match')\n    .required('Password is required'),\n});\n\nconst RegisterPage = () => {\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const [isHidden, setIsHidden] = useState(false);\n  const [rememberMe, setRememberMe] = useState(false);\n  const [registerUser] = usePostRegisterMutation();\n\n  const {\n    register,\n    setValue,\n    formState: { errors },\n    reset,\n    handleSubmit,\n  } = useForm({\n    resolver: yupResolver(schema),\n  });\n\n  useEffect(() => {\n    const rememberEmail = localStorage.getItem('remember');\n    if (rememberEmail) {\n      setValue('email', rememberEmail);\n      setRememberMe(true);\n    }\n  }, [setValue]);\n\n  const onSubmit = async (values) => {\n    try {\n      const res = await registerUser(values).unwrap();\n      if (rememberMe) localStorage.setItem('remember', values.email);\n      else localStorage.removeItem('remember');\n      dispatch(setToken(res.token));\n      dispatch(setUser(res.user));\n\n      navigate('/profile');\n      alert('Successfully registered!');\n      reset();\n    } catch (e) {\n      console.log('ERROR:', e.response?.data || e.message);\n      alert('Failed to register');\n    }\n  };\n\n  return (\n    <>\n      <PageHeader\n        style={{ background: '#205529', color: 'white' }}\n        label=\"Register\"\n        subtitle=\"Registration in a couple of seconds \"\n      />\n      <div className={styles.registration}>\n        <form onSubmit={handleSubmit(onSubmit)}>\n          <div className=\"form-group\">\n            <div className={styles.inputForm}>\n              <input\n                className={styles.inputText}\n                type=\"text\"\n                placeholder=\"Your full name\"\n                autoComplete=\"name\"\n                {...register('name')}\n              />\n              <p className={styles.error}>{errors.name?.message}</p>\n            </div>\n            <div className={styles.inputForm}>\n              <input\n                className={styles.inputText}\n                type=\"email\"\n                placeholder=\"Your email address\"\n                autoComplete=\"email\"\n                {...register('email')}\n              />\n              <p className={styles.error}>{errors.email?.message}</p>\n            </div>\n            <div className={styles.inputForm}>\n              <div className={styles.inputFormPassword}>\n                <input\n                  className={styles.inputText}\n                  type={isHidden ? 'password' : 'text'}\n                  autoComplete=\"new-password\"\n                  placeholder=\"Your password\"\n                  {...register('password')}\n                />\n                <button onClick={() => setIsHidden(!isHidden)} type=\"button\">\n                  {isHidden ? 'üôà' : 'üëÅÔ∏è'}\n                </button>\n              </div>\n              <p className={styles.error}>{errors.password?.message}</p>\n            </div>\n            <div className={styles.inputForm}>\n              <div className={styles.inputFormPassword}>\n                <input\n                  className={styles.inputText}\n                  type={isHidden ? 'password' : 'text'}\n                  placeholder=\"Your password\"\n                  autoComplete=\"new-password\"\n                  {...register('confirmPassword')}\n                />\n                <button onClick={() => setIsHidden(!isHidden)} type=\"button\">\n                  {isHidden ? 'üôà' : 'üëÅÔ∏è'}\n                </button>\n              </div>\n\n              <p className={styles.error}>{errors.confirmPassword?.message}</p>\n            </div>\n            <div className={styles.remember}>\n              <input\n                type=\"checkbox\"\n                className={styles.rememberMe}\n                checked={rememberMe}\n                onChange={(e) => setRememberMe(e.target.checked)}\n              />\n              <p>Remember me</p>\n            </div>\n            <div>\n              <button className={styles.submit} type=\"submit\">\n                Register\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </>\n  );\n};\nexport default RegisterPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}